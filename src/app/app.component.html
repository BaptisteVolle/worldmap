<div class="app-container">
  <div class="world-map-app-container">
    <div class="world-map-container">
      <!-- Map renders here -->

      <div class="zoom-controls mat-elevation-z2">
        <button mat-icon-button (click)="zoomIn()">
          <mat-icon>add</mat-icon>
        </button>
        <button mat-icon-button (click)="zoomOut()">
          <mat-icon>remove</mat-icon>
        </button>
        <button mat-icon-button (click)="resetZoom()">
          <mat-icon>home</mat-icon>
        </button>
      </div>

      <div class="scale-container">
        <span id="scale-info-text" class="scale-info-text">1000 km</span>
        <div class="scale-bar-container" id="scale-bar-container"></div>
      </div>
    </div>

    <div class="map-menu">
      <mat-button-toggle-group class="display-toggle-group" vertical>
        <mat-button-toggle
          color="primary"
          [checked]="currentAttribute === 'population'"
          (click)="displayColorByAttribute('population')"
        >
          Population
        </mat-button-toggle>
        <mat-button-toggle
          color="accent"
          [checked]="currentAttribute === 'area'"
          (click)="displayColorByAttribute('area')"
        >
          Area
        </mat-button-toggle>
        <mat-button-toggle
          color="warn"
          [checked]="currentAttribute === 'density'"
          (click)="displayColorByAttribute('density')"
        >
          Density
        </mat-button-toggle>
        <mat-button-toggle
          [checked]="currentAttribute === 'continents'"
          (click)="displayColorByAttribute('continents')"
        >
          Continents
        </mat-button-toggle>
      </mat-button-toggle-group>

      <mat-divider></mat-divider>

      <div class="wonder-toggles">
        <h3>Civilization Wonders</h3>
        <mat-slide-toggle color="primary" (change)="toggleWonders($event)">
          Show Wonders
        </mat-slide-toggle>
        <div class="wonder-filter" *ngIf="showWonders">
          <mat-button-toggle-group multiple>
            <mat-button-toggle
              [checked]="wonderFilters.includes('Wonder')"
              (change)="filterWonders('Wonder', $event)"
            >
              World Wonders
            </mat-button-toggle>
            <mat-button-toggle
              [checked]="wonderFilters.includes('Natural Wonder')"
              (change)="filterWonders('Natural Wonder', $event)"
            >
              Natural Wonders
            </mat-button-toggle>
          </mat-button-toggle-group>
        </div>
      </div>

      <ng-container *ngIf="countryInfo">
        <mat-card appearance="outlined">
          <mat-card-header>
            <mat-card-title>{{ countryInfo?.name["common"] }}</mat-card-title>
            <mat-card-subtitle>{{ countryInfo?.capital }}</mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <div class="flag-container">
              <img [src]="countryInfo?.flags['png']" alt="Flag" />
            </div>

            <mat-list>
              <mat-list-item>
                <span matListItemIcon><mat-icon>people</mat-icon></span>
                <span matListItemTitle>Population</span>
                <span matListItemLine>{{
                  countryInfo?.population.toLocaleString()
                }}</span>
              </mat-list-item>

              <mat-list-item>
                <span matListItemIcon><mat-icon>map</mat-icon></span>
                <span matListItemTitle>Area</span>
                <span matListItemLine
                  >{{ countryInfo?.area.toLocaleString() }} km²</span
                >
              </mat-list-item>

              <mat-list-item>
                <span matListItemIcon><mat-icon>people_outline</mat-icon></span>
                <span matListItemTitle>Population Density</span>
                <span matListItemLine
                  >{{
                    (
                      countryInfo?.population / countryInfo?.area
                    ).toLocaleString()
                  }}
                  people/km²</span
                >
              </mat-list-item>

              <mat-list-item>
                <span matListItemIcon
                  ><mat-icon>currency_exchange</mat-icon></span
                >
                <span matListItemTitle>Currency</span>
                <span matListItemLine>{{
                  countryInfo?.currency["symbol"]
                }}</span>
              </mat-list-item>
            </mat-list>
          </mat-card-content>
        </mat-card>
      </ng-container>
    </div>
  </div>
</div>
